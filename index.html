<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VidX Lab — All Apps</title>
  <meta name="description" content="All Android apps by VidX Lab with links to Google Play." />
  <link rel="preconnect" href="https://play-lh.googleusercontent.com" crossorigin>
  <style>
    /* ===== Play Store–inspired theme (Material-ish) ===== */
    :root{ --bg:#ffffff; --ink:#1f1f1f; --muted:#5f6368; --divider:#e0e0e0; --tile:#fff; --accent:#01875f; }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;font:400 16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;background:var(--bg);color:var(--ink)}
    a{color:inherit;text-decoration:none}
    .shell{max-width:1120px;margin:0 auto;padding:24px 16px 80px}

    header{display:flex;gap:16px;align-items:center;justify-content:space-between;margin-bottom:12px}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:40px;height:40px;border-radius:8px;background:conic-gradient(from 45deg, #34a853, #4285f4, #fbbc05, #ea4335, #34a853);box-shadow:0 2px 6px rgba(0,0,0,.08)}
    h1{font-size:clamp(20px,3.2vw,28px);margin:0}
    .sub{color:var(--muted);font-size:14px;margin-top:2px}
    .store-link{color:#1a73e8;text-decoration:underline}

    /* search + edit bar */
    .topbar{display:flex;gap:10px;align-items:center;justify-content:space-between;margin:12px 0 16px}
    .search{flex:1;position:relative}
    .search input{width:100%;padding:12px 14px 12px 44px;border-radius:24px;border:1px solid var(--divider);background:#f8f9fa;color:var(--ink);outline:none}
    .search .ico{position:absolute;left:14px;top:50%;transform:translateY(-50%);width:18px;height:18px;border:2px solid var(--muted);border-radius:50%}
    .search .ico::after{content:"";position:absolute;left:10px;top:10px;width:8px;height:2px;background:var(--muted);transform:rotate(45deg)}

    .editbar button{appearance:none;border:1px solid var(--divider);background:var(--tile);padding:10px 14px;border-radius:999px;cursor:pointer}
    .editbar button:hover{box-shadow:0 1px 3px rgba(0,0,0,.08)}

    /* grid */
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
    .card{grid-column:span 4;display:flex;flex-direction:column;gap:10px;background:var(--tile);border:1px solid var(--divider);border-radius:12px;padding:12px;box-shadow:0 1px 2px rgba(0,0,0,.06);position:relative;overflow:hidden;transition:transform .2s ease, box-shadow .2s ease;cursor:pointer}
    @media (max-width:1000px){.card{grid-column:span 6}}
    @media (max-width:640px){.card{grid-column:span 12}}

    /* Feature region */
    .feature{width:100%;aspect-ratio:1024/500;border-radius:8px;background:#f1f3f4;object-fit:cover;position:relative;overflow:hidden}
    .feature.placeholder{display:grid;place-items:center;color:var(--muted);font-weight:600;letter-spacing:.3px}

    /* Generated brand header when no official feature graphic */
    .feature-brand{background:#0b0b0b}
    .fg-blur{position:absolute;inset:0;background-position:center;background-size:cover;filter:blur(28px) saturate(1.2) brightness(.8);transform:scale(1.1)}
    .fg-scrim{position:absolute;inset:0;background:linear-gradient(180deg, rgba(0,0,0,.15), rgba(0,0,0,.55))}
    .fg-content{position:relative;display:flex;align-items:flex-end;gap:12px;padding:14px}
    .fg-logo{width:56px;height:56px;border-radius:12px;border:1px solid rgba(255,255,255,.3);background:#fff;object-fit:cover;box-shadow:0 2px 8px rgba(0,0,0,.25)}
    .fg-text{display:flex;flex-direction:column}
    .fg-title{color:#fff;font-weight:700;line-height:1.1}
    .fg-sub{color:rgba(255,255,255,.85);font-size:13px}

    .row{display:flex;gap:12px;align-items:center}
    .icon{width:56px;height:56px;border-radius:12px;object-fit:cover;border:1px solid var(--divider);background:#f8f9fa}
    .meta{display:flex;flex-direction:column;gap:4px}
    .title{font-weight:600}
    .tag{color:var(--muted);font-size:13px}

    .card:hover{transform:translateY(-1px);box-shadow:0 3px 8px rgba(0,0,0,.08)}
    .card:active{transform:translateY(0) scale(.99)}
    .ripple{position:absolute;border-radius:50%;transform:scale(0);animation:ripple .45s ease-out;background:rgba(1,135,95,.25);pointer-events:none;opacity:1}
    @keyframes ripple{to{transform:scale(12);opacity:0}}

    .cta{margin-top:auto;display:flex;gap:10px;align-items:center;justify-content:space-between}
    .pkg{font-size:12px;color:var(--muted)}
    .play-badge{height:24px;cursor:pointer}

    /* per-card edit controls */
    .edit-controls{position:absolute;top:8px;right:8px;display:none;gap:6px}
    .edit-active .edit-controls{display:flex}
    .edit-btn,.reset-btn{appearance:none;border:1px solid var(--divider);background:rgba(255,255,255,.95);padding:6px 10px;border-radius:999px;font-size:12px;cursor:pointer}
    .edit-btn:hover,.reset-btn:hover{box-shadow:0 1px 3px rgba(0,0,0,.12)}

    /* about + footer */
    .info{margin-top:28px}
    .ibox{background:var(--tile);border:1px solid var(--divider);border-radius:12px;padding:16px}
    .ibox h2{margin:0 0 8px 0;font-size:16px}
    .ibox p{margin:0;color:var(--muted)}

    footer{margin-top:24px;font-size:13px;color:var(--muted);display:flex;flex-direction:column;gap:6px}
    .footer-links a{color:#1a73e8;text-decoration:underline}

    .card:focus-visible{outline:none;box-shadow:0 0 0 3px rgba(1,135,95,.35),0 2px 6px rgba(0,0,0,.1)}
    @media (prefers-reduced-motion: reduce){.card{transition:none !important;transform:none !important}.card:hover{transform:none !important;box-shadow:0 1px 2px rgba(0,0,0,.06)}.ripple{display:none !important;animation:none !important}}
  </style>
</head>
<body>
  <div class="shell">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>VidX Lab — Apps</h1>
          <div class="sub">Browse all apps from VidX Lab in a Play‑style layout.</div>
        </div>
      </div>
      <a class="store-link" href="https://play.google.com/store/apps/dev?id=5192085574932938666&hl=en" target="_blank" rel="noopener">View on Google Play</a>
    </header>

    <div class="topbar">
      <div class="search">
        <span class="ico" aria-hidden="true"></span>
        <input id="q" type="search" placeholder="Search apps (title, description, or package id)" aria-label="Search apps" />
      </div>
      <div class="editbar">
        <button id="toggleEdit" type="button" aria-pressed="false">Customize banners</button>
      </div>
    </div>

    <section id="apps" class="grid" aria-live="polite" aria-busy="false"></section>
    <div id="empty" class="empty" hidden>No apps match your search.</div>

    <!-- About -->
    <section class="info" id="publisherInfo">
      <div class="ibox">
        <h2>About</h2>
        <p>Innovation, security, and media tools—VidX Lab crafts apps designed to enrich and protect your mobile world by Arti Mishra.</p>
      </div>
    </section>

    <footer>
      <div>Icons and listings belong to their respective owners.</div>
      <div class="footer-links"><a href="mailto:vidxplay@gmail.com">Contact</a> · <a href="https://vidxplay.github.io/tnc/filesprivacy.html" target="_blank" rel="noopener">Privacy</a></div>
    </footer>
  </div>

  <!-- Hidden file input for uploads -->
  <input id="uploader" type="file" accept="image/*" hidden>

  <script>
  // ===== Data (official feature graphics preferred; otherwise we auto-generate a brand header) =====
  var APPS = [
    {title:"VidX Applock",id:"com.vidxlab.applocker",icon:"https://play-lh.googleusercontent.com/-DiY0InOB21bpia4Fk6ho8VzRfjX6ESPp-1sTMpz1mvTHVCwYAWE560glEJevfje8Tq4r7z7UunDPsSG776q4g=w240-h480",feature:"",url:"https://play.google.com/store/apps/details?id=com.vidxlab.applocker",tagline:"Secure your apps, protect your privacy."},
    {title:"VidX Files",id:"com.vidxlab.files",icon:"https://play-lh.googleusercontent.com/SUyZdTBW9tz40DDcZd3IU_Id--KMc-Da_Mg38ZGBkD2lpf4va5Gmkmp3Oiv4kWvlamv5dADaOmsiBGbPemuwxg=w240-h480",feature:"",url:"https://play.google.com/store/apps/details?id=com.vidxlab.files",tagline:"Smart file manager."},
    {title:"VidX Music – Offline Player",id:"com.vidxlab.vidxmusic",icon:"https://play-lh.googleusercontent.com/M4AOHimN0lrd92lszsvKkh8IzhJAqxfCpKvHtXgPePQJYUVKR5OHZVG1IGXfJT8Q7AeSj6_muoK-1XQHumw9B_Y=w240-h480",feature:"",url:"https://play.google.com/store/apps/details?id=com.vidxlab.vidxmusic",tagline:"Offline media player for local music & videos."},
    {title:"VidX Player",id:"com.vidx.vidxplayer",icon:"https://play-lh.googleusercontent.com/LeNMRwNy8x4mf_a-h8UcIhpKsC9M_qYAfxh17CAViXxLOifdRxcbQjoKG7dwh0wn-inZn1KR3oYcj0vTm3F4_0Y=w240-h480",feature:"",url:"https://play.google.com/store/apps/details?id=com.vidx.vidxplayer",tagline:"Play everything, beautifully."},
    {title:"VidX Gallery - Photos & Videos",id:"com.vidxlab.gallery",icon:"https://play-lh.googleusercontent.com/uF0muGBpTo2_7QnmGClYxaPmx4-RG4-Qf7KwHGgMP3_WbO4ACJa6eqaLZ0aP_MKmCLVmNgsBbJZTCV_AGD2baA=w240-h480",feature:"",url:"https://play.google.com/store/apps/details?id=com.vidxlab.gallery",tagline:"Fast, secure & lightweight gallery for photos and videos."}
  ];

  // ===== Persistence for banners =====
  var STORAGE_KEY = 'vidx_feature_map';
  function loadFeatureMap(){
    try{ return JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}'); }catch(e){ return {}; }
  }
  function saveFeatureMap(map){
    try{ localStorage.setItem(STORAGE_KEY, JSON.stringify(map)); }catch(e){ /* ignore quota */ }
  }
  function applyFeatureMap(){
    var map = loadFeatureMap();
    for(var i=0;i<APPS.length;i++){
      var id = APPS[i].id; if(map[id]){ APPS[i].feature = map[id]; }
    }
  }

  // ===== Helpers =====
  function normalize(s){ return (s || '').toLowerCase(); }
  function createEl(tag, className, text){
    var el = document.createElement(tag);
    if(className) el.className = className;
    if(text !== undefined && text !== null) el.textContent = text;
    return el;
  }

  // Center-crop & resize to 1024x500 (cover)
  function processImageToBanner(file, cb){
    var img = new Image();
    img.onload = function(){
      var targetW = 1024, targetH = 500, targetR = targetW/targetH;
      var w = img.naturalWidth, h = img.naturalHeight, r = w/h;
      var sx, sy, sw, sh;
      if(r > targetR){ sw = Math.floor(h * targetR); sh = h; sx = Math.floor((w - sw) / 2); sy = 0; }
      else { sw = w; sh = Math.floor(w / targetR); sx = 0; sy = Math.floor((h - sh) / 2); }
      var canvas = document.createElement('canvas');
      canvas.width = targetW; canvas.height = targetH;
      var ctx = canvas.getContext('2d');
      ctx.drawImage(img, sx, sy, sw, sh, 0, 0, targetW, targetH);
      var data = canvas.toDataURL('image/jpeg', 0.9);
      cb(null, data);
    };
    img.onerror = function(){ cb(new Error('Image decode failed')); };
    var reader = new FileReader();
    reader.onload = function(){ img.src = reader.result; };
    reader.onerror = function(){ cb(new Error('File read failed')); };
    reader.readAsDataURL(file);
  }

  var state = { editMode:false, pendingId:null };

  function buildCard(app){
    var a = createEl('a', 'card');
    a.href = app.url; a.target = '_blank'; a.rel = 'noopener';
    a.setAttribute('aria-label', app.title + ' — open on Google Play');

    var useOfficialFeature = !!(app.feature && app.feature.length);

    if(useOfficialFeature){
      var fg = createEl('img', 'feature');
      fg.loading = 'lazy'; fg.decoding = 'async';
      fg.alt = app.title + ' feature graphic';
      fg.src = app.feature; a.appendChild(fg);
    } else {
      var header = createEl('div', 'feature feature-brand');
      var blur = createEl('div', 'fg-blur'); blur.style.backgroundImage = 'url(' + (app.icon || '') + ')';
      var scrim = createEl('div', 'fg-scrim');
      var content = createEl('div', 'fg-content');
      var logo = createEl('img', 'fg-logo'); logo.alt = app.title + ' icon'; logo.src = app.icon;
      var text = createEl('div', 'fg-text');
      var ttl = createEl('div', 'fg-title', app.title);
      var sub = createEl('div', 'fg-sub', app.tagline || '');
      text.appendChild(ttl); text.appendChild(sub);
      content.appendChild(logo); content.appendChild(text);
      header.appendChild(blur); header.appendChild(scrim); header.appendChild(content);
      a.appendChild(header);
    }

    // Icon + meta
    var row = createEl('div', 'row');
    var img = createEl('img', 'icon');
    img.loading = 'lazy'; img.decoding = 'async';
    img.alt = app.title + ' icon'; img.src = app.icon;
    var meta = createEl('div', 'meta');
    var title = createEl('div', 'title', app.title);
    var tag = createEl('div', 'tag', app.tagline || '');
    meta.appendChild(title); meta.appendChild(tag);
    row.appendChild(img); row.appendChild(meta);

    // CTA
    var cta = createEl('div', 'cta');
    var pkg = createEl('span', 'pkg', app.id);
    var play = createEl('img', 'play-badge');
    play.alt = 'Get it on Google Play';
    play.src = 'https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg';
    play.addEventListener('click', function(ev){ ev.preventDefault(); ev.stopPropagation(); try{ window.open(app.url, '_blank', 'noopener'); }catch(e){ location.href = app.url; } });
    cta.appendChild(pkg); cta.appendChild(play);

    // Per-card edit controls (visible in edit mode)
    var controls = createEl('div', 'edit-controls');
    var uploadBtn = createEl('button', 'edit-btn', 'Upload banner');
    uploadBtn.type = 'button';
    uploadBtn.addEventListener('click', function(ev){ ev.preventDefault(); ev.stopPropagation(); beginUploadFor(app.id); });
    var resetBtn = createEl('button', 'reset-btn', 'Reset');
    resetBtn.type = 'button';
    resetBtn.addEventListener('click', function(ev){ ev.preventDefault(); ev.stopPropagation(); clearBanner(app.id); });
    controls.appendChild(uploadBtn); controls.appendChild(resetBtn);

    a.appendChild(controls);
    a.appendChild(row);
    a.appendChild(cta);

    // Ripple effect on click/tap
    function addRipple(ev){
      var rect = a.getBoundingClientRect();
      var clientX = ev.touches ? ev.touches[0].clientX : ev.clientX;
      var clientY = ev.touches ? ev.touches[0].clientY : ev.clientY;
      var x = clientX - rect.left; var y = clientY - rect.top; var d = Math.max(rect.width, rect.height) * 2;
      var rip = document.createElement('span');
      rip.className = 'ripple'; rip.style.width = rip.style.height = d + 'px';
      rip.style.left = (x - d/2) + 'px'; rip.style.top = (y - d/2) + 'px'; a.appendChild(rip);
      setTimeout(function(){ if(rip && rip.parentNode){ rip.parentNode.removeChild(rip); } }, 650);
    }
    a.addEventListener('mousedown', addRipple); a.addEventListener('touchstart', addRipple, {passive:true});

    return a;
  }

  function render(list){
    var grid = document.getElementById('apps');
    var empty = document.getElementById('empty');
    grid.innerHTML = '';
    for(var i=0;i<list.length;i++){ grid.appendChild(buildCard(list[i])); }
    grid.style.display = list.length ? 'grid' : 'none';
    if(empty){ empty.hidden = !!list.length; }
    document.body.classList.toggle('edit-active', !!state.editMode);
    document.getElementById('toggleEdit').setAttribute('aria-pressed', state.editMode ? 'true' : 'false');
    document.getElementById('toggleEdit').textContent = state.editMode ? 'Done' : 'Customize banners';
  }

  function filter(){
    var q = document.getElementById('q');
    var query = normalize(q.value);
    var list = !query ? APPS : APPS.filter(function(app){
      return normalize(app.title).indexOf(query) !== -1 ||
             normalize(app.tagline).indexOf(query) !== -1 ||
             normalize(app.id).indexOf(query) !== -1;
    });
    render(list);
  }

  function toggleEdit(){ state.editMode = !state.editMode; render(APPS); }

  function beginUploadFor(appId){ state.pendingId = appId; document.getElementById('uploader').click(); }

  function handleUploadChange(ev){
    var file = ev.target.files && ev.target.files[0]; if(!file){ return; }
    var id = state.pendingId; state.pendingId = null; ev.target.value = '';
    if(!id){ return; }
    processImageToBanner(file, function(err, dataUrl){
      if(err){ console.warn('Banner processing failed:', err.message); return; }
      // persist
      var map = loadFeatureMap(); map[id] = dataUrl; saveFeatureMap(map);
      for(var i=0;i<APPS.length;i++){ if(APPS[i].id === id){ APPS[i].feature = dataUrl; break; } }
      render(APPS);
    });
  }

  function clearBanner(appId){
    var map = loadFeatureMap(); delete map[appId]; saveFeatureMap(map);
    for(var i=0;i<APPS.length;i++){ if(APPS[i].id === appId){ APPS[i].feature = ''; break; } }
    render(APPS);
  }

  // ===== Init =====
  applyFeatureMap();
  document.getElementById('q').addEventListener('input', filter);
  document.getElementById('toggleEdit').addEventListener('click', toggleEdit);
  document.getElementById('uploader').addEventListener('change', handleUploadChange);
  render(APPS);

  // ===== Smoke tests (console) =====
  (function(){
    function ok(cond, msg){ if(!cond){ throw new Error(msg); } }
    try{
      var grid = document.getElementById('apps');
      ok(grid.children.length === APPS.length, 'Render count should equal APPS length');
      var q = document.getElementById('q');
      q.value = 'vidx'; filter(); ok(grid.children.length === APPS.length, 'Search "vidx" should match all titles');
      q.value = 'unlikely-zz'; filter(); ok(grid.children.length === 0, 'Unlikely query should hide all');
      q.value = ''; filter(); ok(grid.children.length === APPS.length, 'Clearing search should restore all');
      console.log('Play‑theme + upload smoke tests passed ✅');
    }catch(e){ console.warn('Smoke test failed:', e.message); }
  })();
  </script>
</body>
</html>
